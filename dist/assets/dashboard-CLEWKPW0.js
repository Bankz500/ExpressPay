import"./modulepreload-polyfill-B5Qt9EMX.js";import{initializeApp as h}from"https://www.gstatic.com/firebasejs/9.1.3/firebase-app.js";import{getAuth as m,onAuthStateChanged as d,signOut as p}from"https://www.gstatic.com/firebasejs/9.1.3/firebase-auth.js";import{getFirestore as u,doc as y,getDoc as f,collection as w,query as x,where as C,getDocs as E}from"https://www.gstatic.com/firebasejs/9.1.3/firebase-firestore.js";const I={apiKey:"AIzaSyA3OvFCz4sU4QnZAPnFrc_yzZezjzlzkgY",authDomain:"exprespay-26ac0.firebaseapp.com",projectId:"exprespay-26ac0",storageBucket:"exprespay-26ac0.firebasestorage.app",messagingSenderId:"933418932546",appId:"1:933418932546:web:1eaac518eecab2042390db",measurementId:"G-8ECL5E373T"},l=h(I),a=m(l),g=u(l);d(a,async e=>{if(e){const s=y(g,"users",e.uid),n=await f(s);if(n.exists()){const t=n.data();document.getElementById("Deposit-account").textContent=`${t.deposit||"0.00"}`,document.getElementById("Profit-wallet").textContent=`${t.profit||"0.00"}`,document.getElementById("wallet").textContent=`${t.wallet||"0.00"}`,document.getElementById("welcome-message").textContent=`Welcome ${t.name}`}else console.log("No user document found in Firestore."),alert("No user data found.")}else console.log("No user signed in, redirecting to sign-in page."),window.location.href="sign-in.html"});window.signOut=function(){p(a).then(()=>{alert("Signed out successfully!"),window.location.href="sign-in.html"}).catch(e=>{alert("Error signing out: "+e.message)})};document.addEventListener("DOMContentLoaded",async()=>{try{d(a,async e=>{if(e){const s=w(g,"history"),n=x(s,C("userId","==",e.uid)),t=await E(n),r=document.getElementById("history-container");if(!t.empty)t.forEach(o=>{const c=o.data(),i=document.createElement("div");i.className="bg-white p-4 rounded-lg shadow-md text-center h-16",i.innerHTML=`
                                    <h3 class="font-semibold text-gray-800">${c.description||"No description"}</h3>
                                    <p class="text-gray-600">ID: ${o.id}</p>
                                    <p class="text-gray-600">$${c.amount||"0.00"}</p>
                                `,r.appendChild(i)});else{console.log("No transaction history found for this user.");const o=document.createElement("div");o.className="bg-white p-4 rounded-lg shadow-md text-center h-16",o.innerHTML=`
                                <h3 class="font-semibold text-gray-800">No history</h3>
                                <p class="text-gray-600">You have no transaction history.</p>
                            `,r.appendChild(o)}}else console.log("No user signed in, redirecting to sign-in page."),window.location.href="sign-in.html"})}catch(e){console.error("Error fetching transaction history:",e)}});
